# Environment Variables Configuration Guide

## Email Configuration (SendGrid)
```env
# SendGrid API Key for transactional emails
SENDGRID_API_KEY=your_sendgrid_api_key_here

# Sender email address (must be verified in SendGrid)
FROM_EMAIL=noreply@skillstudio.com
```

## AWS S3 Configuration
```env
# AWS credentials for S3 file storage
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1

# S3 bucket for course materials, videos, and certificates
S3_BUCKET_NAME=skillstudio-uploads
```

## Database Configuration
```env
# PostgreSQL database connection (Neon)
DATABASE_URL=postgresql+asyncpg://user:password@host/database
```

## JWT Authentication
```env
# Secret key for JWT token generation
SECRET_KEY=your_secret_key_here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

## Application Settings
```env
# Application environment
ENVIRONMENT=development  # or production
DEBUG=true

# Frontend URL (for CORS and email links)
FRONTEND_URL=http://localhost:3000
```

## Setup Instructions

### 1. SendGrid Setup
1. Create account at https://sendgrid.com
2. Generate API key: Settings → API Keys → Create API Key
3. Verify sender email: Settings → Sender Authentication
4. Copy API key to `SENDGRID_API_KEY`

### 2. AWS S3 Setup
1. Create AWS account at https://aws.amazon.com
2. Create S3 bucket: S3 → Create bucket
3. Enable public access for uploads (or use presigned URLs)
4. Create IAM user with S3 permissions:
   - Go to IAM → Users → Add user
   - Attach policy: `AmazonS3FullAccess` (or custom policy)
   - Generate access keys
5. Copy credentials to environment variables

### 3. Database Setup
1. Create Neon PostgreSQL database at https://neon.tech
2. Copy connection string
3. Replace `postgresql://` with `postgresql+asyncpg://`
4. Add to `DATABASE_URL`

### 4. Run Migrations
```bash
cd backend
alembic upgrade head
```

### 5. Install Dependencies
```bash
# Backend
cd backend
pip install -r requirements.txt

# Frontend
cd frontend
npm install
```

### 6. Start Application
```bash
# Backend (from backend/)
uvicorn app.main:app --reload

# Frontend (from frontend/)
npm run dev
```

## Feature-specific Environment Variables

### Email Templates
Email templates are located in `backend/app/templates/emails/`:
- welcome.html
- password_reset.html
- course_completion.html
- weekly_progress.html
- enrollment_confirmation.html
- notification.html
- instructor_payout.html

### File Upload Limits
Configured in upload endpoints:
- Videos: 500MB
- Images: 5MB
- Documents: 20MB
- Batch: 10 files max

### Certificate Generation
Certificates are automatically generated when:
- Student completes a course
- Instructor marks course as completed
- Student manually requests certificate

Generated files are stored in S3: `certificates/certificate_{id}.pdf`

## Security Recommendations

1. **Never commit `.env` to version control**
2. Use strong, random `SECRET_KEY` (generate with `openssl rand -hex 32`)
3. Rotate API keys regularly
4. Use IAM roles in production instead of access keys
5. Enable MFA on AWS account
6. Use environment-specific configurations
7. Limit S3 bucket permissions to necessary operations

## Production Checklist

- [ ] Set `ENVIRONMENT=production`
- [ ] Set `DEBUG=false`
- [ ] Use production database
- [ ] Configure CDN for S3 (CloudFront)
- [ ] Enable S3 versioning
- [ ] Setup backup strategy
- [ ] Configure monitoring (CloudWatch, Sentry)
- [ ] Setup email send rate limits
- [ ] Enable CORS for production frontend URL
- [ ] Use secrets manager (AWS Secrets Manager or similar)
